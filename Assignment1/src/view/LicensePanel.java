/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package view;

import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import model.License;
import model.Person;

/**
 *
 * @author Saivignesh Sridhar
 */
public class LicensePanel extends javax.swing.JPanel {

    /**
     * Creates new form LicensePanel
     */
    Person person;
    License license = new License();
    public LicensePanel(Person person) {
        initComponents();
        this.person = person;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblLicTitle = new javax.swing.JLabel();
        lblLiceNo = new javax.swing.JLabel();
        txtLicNo = new javax.swing.JTextField();
        lblDOI = new javax.swing.JLabel();
        lblDOE = new javax.swing.JLabel();
        lblBloodType = new javax.swing.JLabel();
        txtBloodType = new javax.swing.JTextField();
        btnLicSubmit = new javax.swing.JButton();
        ftxtDOI = new javax.swing.JFormattedTextField();
        ftxtDOE = new javax.swing.JFormattedTextField();
        btnUpload = new javax.swing.JButton();
        lblPhotoArea = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();

        setBackground(new java.awt.Color(222, 236, 236));
        setForeground(new java.awt.Color(0, 102, 102));
        setMaximumSize(new java.awt.Dimension(673, 436));
        setMinimumSize(new java.awt.Dimension(673, 436));
        setName(""); // NOI18N
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblLicTitle.setBackground(new java.awt.Color(222, 236, 236));
        lblLicTitle.setFont(new java.awt.Font("Times New Roman", 1, 24)); // NOI18N
        lblLicTitle.setForeground(new java.awt.Color(0, 102, 102));
        lblLicTitle.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblLicTitle.setText("License Details");
        add(lblLicTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 18, 696, -1));

        lblLiceNo.setBackground(new java.awt.Color(222, 236, 236));
        lblLiceNo.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        lblLiceNo.setForeground(new java.awt.Color(0, 102, 102));
        lblLiceNo.setText("License Number :");
        add(lblLiceNo, new org.netbeans.lib.awtextra.AbsoluteConstraints(67, 90, 130, -1));

        txtLicNo.setBackground(new java.awt.Color(222, 236, 236));
        txtLicNo.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        txtLicNo.setForeground(new java.awt.Color(0, 102, 102));
        txtLicNo.setToolTipText("Enter your Driving License Number");
        txtLicNo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtLicNoActionPerformed(evt);
            }
        });
        add(txtLicNo, new org.netbeans.lib.awtextra.AbsoluteConstraints(232, 88, 158, 26));

        lblDOI.setBackground(new java.awt.Color(222, 236, 236));
        lblDOI.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        lblDOI.setForeground(new java.awt.Color(0, 102, 102));
        lblDOI.setText("Date of Issuance :");
        add(lblDOI, new org.netbeans.lib.awtextra.AbsoluteConstraints(67, 126, -1, 24));

        lblDOE.setBackground(new java.awt.Color(222, 236, 236));
        lblDOE.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        lblDOE.setForeground(new java.awt.Color(0, 102, 102));
        lblDOE.setText("Date of Expiry :");
        add(lblDOE, new org.netbeans.lib.awtextra.AbsoluteConstraints(82, 159, -1, -1));

        lblBloodType.setBackground(new java.awt.Color(222, 236, 236));
        lblBloodType.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        lblBloodType.setForeground(new java.awt.Color(0, 102, 102));
        lblBloodType.setText("Blood Group :");
        add(lblBloodType, new org.netbeans.lib.awtextra.AbsoluteConstraints(94, 196, -1, -1));

        txtBloodType.setBackground(new java.awt.Color(222, 236, 236));
        txtBloodType.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        txtBloodType.setForeground(new java.awt.Color(0, 102, 102));
        txtBloodType.setToolTipText("Enter your Blood Group");
        txtBloodType.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtBloodTypeActionPerformed(evt);
            }
        });
        add(txtBloodType, new org.netbeans.lib.awtextra.AbsoluteConstraints(232, 194, 158, 26));

        btnLicSubmit.setBackground(new java.awt.Color(222, 236, 236));
        btnLicSubmit.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        btnLicSubmit.setForeground(new java.awt.Color(0, 102, 102));
        btnLicSubmit.setText("Submit");
        btnLicSubmit.setBorder(javax.swing.BorderFactory.createMatteBorder(1, 1, 1, 1, new java.awt.Color(0, 102, 102)));
        btnLicSubmit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLicSubmitActionPerformed(evt);
            }
        });
        add(btnLicSubmit, new org.netbeans.lib.awtextra.AbsoluteConstraints(243, 264, 118, 35));

        ftxtDOI.setBackground(new java.awt.Color(222, 236, 236));
        ftxtDOI.setForeground(new java.awt.Color(0, 102, 102));
        ftxtDOI.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.DateFormatter(new java.text.SimpleDateFormat("MM/dd/yyyy"))));
        ftxtDOI.setToolTipText("Enter the Date the License was Issued");
        ftxtDOI.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        ftxtDOI.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        ftxtDOI.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ftxtDOIActionPerformed(evt);
            }
        });
        add(ftxtDOI, new org.netbeans.lib.awtextra.AbsoluteConstraints(232, 125, 158, 26));

        ftxtDOE.setBackground(new java.awt.Color(222, 236, 236));
        ftxtDOE.setForeground(new java.awt.Color(0, 102, 102));
        ftxtDOE.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.DateFormatter(new java.text.SimpleDateFormat("MM/dd/yyyy"))));
        ftxtDOE.setToolTipText("Enter the date your License will Expire");
        ftxtDOE.setCursor(new java.awt.Cursor(java.awt.Cursor.TEXT_CURSOR));
        ftxtDOE.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        add(ftxtDOE, new org.netbeans.lib.awtextra.AbsoluteConstraints(232, 157, 158, 26));

        btnUpload.setBackground(new java.awt.Color(222, 236, 236));
        btnUpload.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        btnUpload.setForeground(new java.awt.Color(0, 102, 102));
        btnUpload.setText("Upload");
        btnUpload.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 102, 102), 1, true));
        btnUpload.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUploadActionPerformed(evt);
            }
        });
        add(btnUpload, new org.netbeans.lib.awtextra.AbsoluteConstraints(418, 226, 67, 27));

        lblPhotoArea.setBackground(new java.awt.Color(222, 236, 236));
        lblPhotoArea.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        lblPhotoArea.setForeground(new java.awt.Color(0, 102, 102));
        lblPhotoArea.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        lblPhotoArea.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        add(lblPhotoArea, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 88, 102, 129));
        add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(102, 226, 286, 27));
    }// </editor-fold>//GEN-END:initComponents

    private void txtLicNoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtLicNoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtLicNoActionPerformed

    private void txtBloodTypeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtBloodTypeActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtBloodTypeActionPerformed

    private void btnLicSubmitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnLicSubmitActionPerformed
        
            // TODO add your handling code here:
            
           
            license.setStLicNo(txtLicNo.getText());
            license.setStIssDate(ftxtDOI.getText());
            license.setStExpDate(ftxtDOE.getText());
            license.setStBloodType(txtBloodType.getText());
            license.getImPhoto();
            
            person.setLicense(license);
            
            JOptionPane.showMessageDialog(this, "License Details Saved");
    }//GEN-LAST:event_btnLicSubmitActionPerformed

    private void ftxtDOIActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ftxtDOIActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_ftxtDOIActionPerformed

    private void btnUploadActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnUploadActionPerformed
        // TODO add your handling code here:
        JFileChooser fileChooser = new JFileChooser();
        fileChooser.showOpenDialog(null);
        
        BufferedImage bfImage = null;
        try {
            File fileImage = fileChooser.getSelectedFile();
            bfImage = ImageIO.read(new File(fileImage.getAbsolutePath()));
        } catch (IOException ex) {
            Logger.getLogger(LicensePanel.class.getName()).log(Level.SEVERE, null, ex);
        }
        Image imPhoto = bfImage.getScaledInstance(lblPhotoArea.getWidth(), lblPhotoArea.getHeight(),Image.SCALE_SMOOTH);
        ImageIcon imIcon = new ImageIcon(imPhoto);
//        ImageIcon ic = new ImageIcon(fileName);
//        Image imPhoto = ic.getImage().getScaledInstance(lblPhotoArea.getWidth(), lblPhotoArea.getHeight(),Image.SCALE_SMOOTH);
        lblPhotoArea.setIcon(imIcon);
        license.setImPhoto(imPhoto);
        
    }//GEN-LAST:event_btnUploadActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnLicSubmit;
    private javax.swing.JButton btnUpload;
    private javax.swing.JFormattedTextField ftxtDOE;
    private javax.swing.JFormattedTextField ftxtDOI;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel lblBloodType;
    private javax.swing.JLabel lblDOE;
    private javax.swing.JLabel lblDOI;
    private javax.swing.JLabel lblLicTitle;
    private javax.swing.JLabel lblLiceNo;
    private javax.swing.JLabel lblPhotoArea;
    private javax.swing.JTextField txtBloodType;
    private javax.swing.JTextField txtLicNo;
    // End of variables declaration//GEN-END:variables
}
